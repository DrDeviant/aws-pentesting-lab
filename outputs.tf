

// more output examples: 
// https://github.com/terraform-aws-modules/terraform-aws-ec2-instance/blob/master/outputs.tf



// Save Kali Private key on local file kali.pem
resource "local_file" "private_key" {
    content  = tls_private_key.kali-rsa-key.private_key_pem
    filename = "kali.pem"
    file_permission = "400"
}

output "ssh_ec2_kali_linux_connect" {
  value = "ssh -i kali.pem -o StrictHostKeyChecking=no -o IdentitiesOnly=yes kali@${aws_instance.kali.public_ip}"

    depends_on = [
      aws_instance.kali,
  ]
}

output "ssh_ec2_kali_linux_wireguard" {
  value = "scp -i kali.pem -o StrictHostKeyChecking=no -o IdentitiesOnly=yes kali@${aws_instance.kali.public_ip}:/home/kali/client_vpn.wg ."

    depends_on = [
      aws_instance.kali,
  ]
}

output "metasploitable3_output_ip" {
  value = "metasploit ip: @${aws_instance.metasploitable3.private_ip}"

    depends_on = [
      aws_instance.metasploitable3,
  ]
}

#output "ssh_eip_kali_linux_connect" {
#  value = "ssh -i kali.pem -o IdentitiesOnly=yes kali@${aws_eip.ElasticIP.public_ip}"
#}



